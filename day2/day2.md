# DAY2
Trong L·∫≠p tr√¨nh H∆∞·ªõng ƒë·ªëi t∆∞·ª£ng, m·ªôt **class** kh√¥ng ch·ªâ l√† b·∫£n thi·∫øt k·∫ø cho d·ªØ li·ªáu; n√≥ l√† th·ª±c th·ªÉ ƒë√≥ng g√≥i ch·∫∑t ch·∫Ω **tr·∫°ng th√°i (state)** v√† **h√†nh vi (behavior)**. Kotlin cung c·∫•p c√°c c√¥ng c·ª• m·∫°nh m·∫Ω ƒë·ªÉ hi·ªán th·ª±c h√≥a c√°c nguy√™n l√Ω OOP m·ªôt c√°ch thanh l·ªãch v√† hi·ªáu qu·∫£.

---

## 1.1 Access Modifier v√† Nguy√™n t·∫Øc ƒê√≥ng g√≥i (Encapsulation) üì¶

**Encapsulation (T√≠nh ƒë√≥ng g√≥i)** l√† nguy√™n t·∫Øc c·ªët l√µi c·ªßa OOP: che gi·∫•u tr·∫°ng th√°i b√™n trong c·ªßa m·ªôt ƒë·ªëi t∆∞·ª£ng v√† ch·ªâ cho ph√©p t∆∞∆°ng t√°c th√¥ng qua m·ªôt t·∫≠p h·ª£p c√°c h√†m c√¥ng khai (**public methods**). ƒêi·ªÅu n√†y gi√∫p b·∫£o v·ªá s·ª± to√†n v·∫πn c·ªßa d·ªØ li·ªáu v√† gi·∫£m s·ª± ph·ª• thu·ªôc l·∫´n nhau gi·ªØa c√°c ph·∫ßn c·ªßa h·ªá th·ªëng.

**Access modifiers** trong Kotlin l√† c√¥ng c·ª• ch√≠nh ƒë·ªÉ th·ª±c thi nguy√™n t·∫Øc n√†y:

- **private**  
  M·ª©c ƒë·ªô ƒë√≥ng g√≥i m·∫°nh nh·∫•t. B·∫•t c·ª© th·ª© g√¨ ƒë∆∞·ª£c ƒë√°nh d·∫•u `private` (thu·ªôc t√≠nh, h√†m) ƒë·ªÅu l√† chi ti·∫øt tri·ªÉn khai n·ªôi b·ªô c·ªßa class. B√™n ngo√†i kh√¥ng th·ªÉ th·∫•y ho·∫∑c thay ƒë·ªïi ch√∫ng. ƒêi·ªÅu n√†y cho ph√©p b·∫°n t·ª± do thay ƒë·ªïi logic b√™n trong m√† kh√¥ng ·∫£nh h∆∞·ªüng ƒë·∫øn c√°c ph·∫ßn kh√°c c·ªßa code ƒëang s·ª≠ d·ª•ng class ƒë√≥.

- **protected**  
  Cho ph√©p class con k·∫ø th·ª´a v√† s·ª≠ d·ª•ng c√°c th√†nh vi√™n c·ªßa class cha, t·∫°o ra m·ªôt "API ƒë∆∞·ª£c b·∫£o v·ªá" cho vi·ªác m·ªü r·ªông, nh∆∞ng v·∫´n ·∫©n ch√∫ng kh·ªèi th·∫ø gi·ªõi b√™n ngo√†i.

- **internal**  
  L√† m·ªôt gi·∫£i ph√°p th·ª±c t·∫ø cho c√°c d·ª± √°n l·ªõn. Cho ph√©p c√°c class trong c√πng m·ªôt module (v√≠ d·ª•: m·ªôt th∆∞ vi·ªán ho·∫∑c m·ªôt feature) t∆∞∆°ng t√°c ch·∫∑t ch·∫Ω v·ªõi nhau m√† kh√¥ng c·∫ßn ph·∫£i `public` ch√∫ng cho to√†n b·ªô ·ª©ng d·ª•ng.

- **public**  
  L√† "API c√¥ng khai" c·ªßa class b·∫°n. ƒê√¢y l√† nh·ªØng g√¨ b·∫°n cam k·∫øt s·∫Ω kh√¥ng thay ƒë·ªïi m·ªôt c√°ch ƒë·ªôt ng·ªôt.

**T∆∞ duy OOP:**  
Thay v√¨ m·∫∑c ƒë·ªãnh m·ªçi th·ª© l√† `public`, h√£y b·∫Øt ƒë·∫ßu v·ªõi `private`. Ch·ªâ n√¢ng c·∫•p ph·∫°m vi truy c·∫≠p (private ‚Üí protected ‚Üí internal ‚Üí public) khi th·ª±c s·ª± c·∫ßn thi·∫øt. ƒêi·ªÅu n√†y s·∫Ω t·∫°o ra c√°c class m·∫°nh m·∫Ω, d·ªÖ b·∫£o tr√¨ v√† √≠t l·ªói h∆°n.

---

### V√≠ d·ª• n√¢ng cao:

```kotlin
class BankAccount(private var balance: Double) { // 'balance' ƒë∆∞·ª£c ƒë√≥ng g√≥i ch·∫∑t ch·∫Ω

    // H√†nh vi public ƒë·ªÉ t∆∞∆°ng t√°c v·ªõi tr·∫°ng th√°i private
    fun deposit(amount: Double) {
        if (amount > 0) {
            balance += amount
            logTransaction("Deposited", amount)
        }
    }

    // H√†nh vi public
    fun withdraw(amount: Double): Boolean {
        if (amount > 0 && amount <= balance) {
            balance -= amount
            logTransaction("Withdrew", amount)
            return true
        }
        return false
    }

    // Chi ti·∫øt tri·ªÉn khai n·ªôi b·ªô, kh√¥ng c·∫ßn thi·∫øt cho b√™n ngo√†i
    private fun logTransaction(type: String, amount: Double) {
        println("[$type] Amount: $amount, New Balance: $balance")
    }
}
```

·ªû ƒë√¢y, `balance` l√† **private**.  
C√°ch duy nh·∫•t ƒë·ªÉ thay ƒë·ªïi n√≥ l√† th√¥ng qua c√°c h√†m `deposit` v√† `withdraw`.  
Ch√∫ng ta c√≥ th·ªÉ th√™m logic x√°c th·ª±c ho·∫∑c ghi log (`logTransaction`) b√™n trong m√† kh√¥ng ·∫£nh h∆∞·ªüng ƒë·∫øn c√°ch `BankAccount` ƒë∆∞·ª£c s·ª≠ d·ª•ng t·ª´ b√™n ngo√†i.

---
## 1.2 Constructor trong Kotlin

**Constructor** (h√†m kh·ªüi t·∫°o) l√† th√†nh ph·∫ßn ƒë·∫∑c bi·ªát d√πng ƒë·ªÉ t·∫°o v√† kh·ªüi t·∫°o m·ªôt ƒë·ªëi t∆∞·ª£ng t·ª´ class. Kotlin h·ªó tr·ª£ hai lo·∫°i constructor: **primary constructor** (h√†m kh·ªüi t·∫°o ch√≠nh) v√† **secondary constructor** (h√†m kh·ªüi t·∫°o ph·ª•).

---

### Primary constructor (H√†m kh·ªüi t·∫°o ch√≠nh)

Primary constructor ƒë∆∞·ª£c khai b√°o c√πng v·ªõi t√™n class, th∆∞·ªùng d√πng ƒë·ªÉ kh·ªüi t·∫°o c√°c thu·ªôc t√≠nh c∆° b·∫£n c·ªßa ƒë·ªëi t∆∞·ª£ng. C√°c tham s·ªë truy·ªÅn v√†o primary constructor c√≥ th·ªÉ ƒë∆∞·ª£c khai b√°o l√† `val` (readonly) ho·∫∑c `var` (c√≥ th·ªÉ thay ƒë·ªïi).

**V√≠ d·ª•:**

```kotlin
class Person(val name: String, var age: Int)
```
- Khi t·∫°o ƒë·ªëi t∆∞·ª£ng:  
  `val p = Person("An", 20)`

C√°c thu·ªôc t√≠nh trong constructor s·∫Ω ƒë∆∞·ª£c kh·ªüi t·∫°o ngay khi ƒë·ªëi t∆∞·ª£ng ƒë∆∞·ª£c t·∫°o.

---

### Truy·ªÅn modifier cho constructor

C√≥ th·ªÉ truy·ªÅn modifier nh∆∞ `private`, `public`, ho·∫∑c annotation cho constructor:

```kotlin
class SecretUser private constructor(val username: String)
```
- Constructor n√†y l√† `private`, t·ª©c l√† kh√¥ng th·ªÉ t·∫°o ƒë·ªëi t∆∞·ª£ng t·ª´ b√™n ngo√†i class.

---

### N·∫øu kh√¥ng d√πng `val` ho·∫∑c `var` trong constructor

Khi khai b√°o constructor m√† kh√¥ng d√πng `val` ho·∫∑c `var`, tham s·ªë ƒë√≥ ch·ªâ c√≥ t√°c d·ª•ng trong kh·ªëi kh·ªüi t·∫°o (init block) ho·∫∑c c√°c h√†m b√™n trong class:

```kotlin
class Animal(name: String) {
    val animalName = name
}
```

---

### G√°n gi√° tr·ªã m·∫∑c ƒë·ªãnh cho tham s·ªë

C√≥ th·ªÉ ƒë·∫∑t gi√° tr·ªã m·∫∑c ƒë·ªãnh cho tham s·ªë trong primary constructor:

```kotlin
class Product(val name: String, val price: Double = 0.0)
```
- T·∫°o ƒë·ªëi t∆∞·ª£ng:  
  `val p1 = Product("Book")`        // price = 0.0  
  `val p2 = Product("Pen", 2.5)`    // price = 2.5

---

### S·ª≠ d·ª•ng logic trong qu√° tr√¨nh kh·ªüi t·∫°o v·ªõi init block

N·∫øu c·∫ßn ki·ªÉm tra ho·∫∑c x·ª≠ l√Ω logic khi kh·ªüi t·∫°o, d√πng th√™m `init block`:

```kotlin
class Account(val username: String, var balance: Double) {
    init {
        require(balance >= 0) { "Balance ph·∫£i l·ªõn h∆°n ho·∫∑c b·∫±ng 0" }
    }
}
```

---

### Secondary constructor (H√†m kh·ªüi t·∫°o ph·ª•)

Secondary constructor ƒë∆∞·ª£c khai b√°o b√™n trong th√¢n class v·ªõi t·ª´ kh√≥a `constructor`.  
Th∆∞·ªùng d√πng khi b·∫°n mu·ªën h·ªó tr·ª£ nhi·ªÅu c√°ch kh·ªüi t·∫°o cho class, ho·∫∑c c·∫ßn x·ª≠ l√Ω logic ph·ª©c t·∫°p h∆°n, ƒë·∫∑c bi·ªát khi c√≥ s·ª± k·∫øt h·ª£p gi·ªØa nhi·ªÅu tham s·ªë ho·∫∑c khi c·∫ßn kh·ªüi t·∫°o t·ª´ng ph·∫ßn.

**V√≠ d·ª•:**

```kotlin
class Student(val name: String) {
    var grade: Int = 0

    // Secondary constructor
    constructor(name: String, grade: Int) : this(name) {
        this.grade = grade
    }
}
```
- Khi t·∫°o ƒë·ªëi t∆∞·ª£ng:  
  `val st1 = Student("Hoa")`  
  `val st2 = Student("Lan", 12)`

Secondary constructor th∆∞·ªùng g·ªçi l·∫°i primary constructor b·∫±ng t·ª´ kh√≥a `this(...)`.

---

### C√≥ th·ªÉ c√≥ nhi·ªÅu secondary constructor

```kotlin
class Box(val width: Int, val height: Int) {
    var color: String = "white"

    constructor(width: Int, height: Int, color: String) : this(width, height) {
        this.color = color
    }
}
```

---

### Th·ª© t·ª± th·ª±c thi khi kh·ªüi t·∫°o

Khi t·∫°o ƒë·ªëi t∆∞·ª£ng, th·ª© t·ª± th·ª±c thi l√†:
1. Primary constructor (n·∫øu c√≥).
2. Init block (n·∫øu c√≥).
3. Secondary constructor (n·∫øu ƒë∆∞·ª£c s·ª≠ d·ª•ng).

**V√≠ d·ª• minh h·ªça:**

```kotlin
class Demo(val value: Int) {
    init {
        println("Init block called. Value = $value")
    }

    constructor(value: Int, text: String) : this(value) {
        println("Secondary constructor called. Text = $text")
    }
}

val demo1 = Demo(10)
// Output: Init block called. Value = 10

val demo2 = Demo(20, "Hello")
// Output: Init block called. Value = 20
//         Secondary constructor called. Text = Hello
```

---

**T√≥m l·∫°i v·ªÅ Constructor trong Kotlin:**
- Primary constructor: khai b√°o ƒë∆°n gi·∫£n, g·∫Øn li·ªÅn v·ªõi t√™n class, d√πng cho thu·ªôc t√≠nh ch√≠nh.
- Secondary constructor: khai b√°o b·ªï sung trong th√¢n class, d√πng cho c√°c tr∆∞·ªùng h·ª£p kh·ªüi t·∫°o ƒë·∫∑c bi·ªát.
- C√≥ th·ªÉ k·∫øt h·ª£p v·ªõi init block ƒë·ªÉ x·ª≠ l√Ω ki·ªÉm tra ho·∫∑c logic b·ªï sung khi kh·ªüi t·∫°o ƒë·ªëi t∆∞·ª£ng.

### 1.3. Init block (Kh·ªëi kh·ªüi t·∫°o)

**Init block** l√† m·ªôt kh·ªëi l·ªánh ƒë·∫∑c bi·ªát trong class Kotlin, ƒë∆∞·ª£c th·ª±c thi ngay sau khi primary constructor ho√†n th√†nh vi·ªác kh·ªüi t·∫°o thu·ªôc t√≠nh.  
Init block cho ph√©p b·∫°n th·ª±c hi·ªán c√°c thao t√°c b·ªï sung nh∆∞ ki·ªÉm tra d·ªØ li·ªáu ƒë·∫ßu v√†o, ghi log, ho·∫∑c thi·∫øt l·∫≠p tr·∫°ng th√°i cho ƒë·ªëi t∆∞·ª£ng.

---

#### ƒê·∫∑c ƒëi·ªÉm c·ªßa init block

- ƒê∆∞·ª£c khai b√°o b√™n trong th√¢n class v·ªõi t·ª´ kh√≥a `init`.
- C√≥ th·ªÉ c√≥ nhi·ªÅu init block trong m·ªôt class; ch√∫ng s·∫Ω ƒë∆∞·ª£c th·ª±c thi theo th·ª© t·ª± xu·∫•t hi·ªán khi kh·ªüi t·∫°o ƒë·ªëi t∆∞·ª£ng.
- Init block th∆∞·ªùng d√πng ƒë·ªÉ ki·ªÉm tra t√≠nh h·ª£p l·ªá c·ªßa d·ªØ li·ªáu, ho·∫∑c th·ª±c hi·ªán c√°c thao t√°c kh·ªüi t·∫°o n√¢ng cao.

---

#### V√≠ d·ª• ƒë∆°n gi·∫£n

```kotlin
class User(val name: String, var age: Int) {
    init {
        require(age >= 0) { "Tu·ªïi ph·∫£i >= 0" }
        println("User $name ƒë∆∞·ª£c t·∫°o v·ªõi tu·ªïi $age")
    }
}
```

Khi t·∫°o ƒë·ªëi t∆∞·ª£ng:
```kotlin
val u1 = User("Hoa", 20)
// Output: User Hoa ƒë∆∞·ª£c t·∫°o v·ªõi tu·ªïi 20

val u2 = User("Lan", -5)
// L·ªói: IllegalArgumentException: Tu·ªïi ph·∫£i >= 0
```

---

#### C√≥ th·ªÉ s·ª≠ d·ª•ng nhi·ªÅu init block

```kotlin
class Customer(val id: Int, val name: String) {
    init {
        println("Kh·ªüi t·∫°o id: $id")
    }
    init {
        println("Kh·ªüi t·∫°o name: $name")
    }
}
val c = Customer(1, "An")
// Output:
// Kh·ªüi t·∫°o id: 1
// Kh·ªüi t·∫°o name: An
```

---

#### K·∫øt h·ª£p init block v·ªõi secondary constructor

N·∫øu class c√≥ secondary constructor, init block v·∫´n s·∫Ω ƒë∆∞·ª£c th·ª±c thi sau khi primary constructor ƒë∆∞·ª£c g·ªçi (qua `this(...)`).

```kotlin
class Product(val name: String) {
    var price: Double = 0.0

    init {
        println("Init block: $name, price = $price")
    }

    constructor(name: String, price: Double) : this(name) {
        this.price = price
        println("Secondary constructor: $name, price = $price")
    }
}

val p1 = Product("Book")
// Output: Init block: Book, price = 0.0

val p2 = Product("Pen", 5.0)
// Output: Init block: Pen, price = 0.0
//         Secondary constructor: Pen, price = 5.0
```

---

**T√≥m l·∫°i v·ªÅ init block:**
- Init block gi√∫p ki·ªÉm tra, thi·∫øt l·∫≠p ho·∫∑c x·ª≠ l√Ω d·ªØ li·ªáu ngay khi ƒë·ªëi t∆∞·ª£ng ƒë∆∞·ª£c t·∫°o ra.
- ƒê∆∞·ª£c th·ª±c thi ngay sau khi primary constructor k·∫øt th√∫c.
- C√≥ th·ªÉ c√≥ nhi·ªÅu init block, ch·∫°y l·∫ßn l∆∞·ª£t t·ª´ tr√™n xu·ªëng d∆∞·ªõi.
- K·∫øt h·ª£p t·ªët v·ªõi secondary constructor v√† c√°c thao t√°c logic kh·ªüi t·∫°o.
- --
## 1.3 Init block (Kh·ªëi kh·ªüi t·∫°o)

**Init block** l√† kh·ªëi l·ªánh ƒë·∫∑c bi·ªát trong class Kotlin, d√πng ƒë·ªÉ th·ª±c thi c√°c thao t√°c b·ªï sung ngay sau khi primary constructor ho√†n t·∫•t vi·ªác kh·ªüi t·∫°o thu·ªôc t√≠nh. Init block gi√∫p ki·ªÉm tra d·ªØ li·ªáu ƒë·∫ßu v√†o, ghi log, ho·∫∑c thi·∫øt l·∫≠p tr·∫°ng th√°i ban ƒë·∫ßu cho ƒë·ªëi t∆∞·ª£ng.

---

### ƒê·∫∑c ƒëi·ªÉm c·ªßa Init block

- ƒê∆∞·ª£c khai b√°o b√™n trong th√¢n class v·ªõi t·ª´ kh√≥a `init`.
- C√≥ th·ªÉ khai b√°o nhi·ªÅu init block trong m·ªôt class; ch√∫ng ƒë∆∞·ª£c th·ª±c thi theo th·ª© t·ª± xu·∫•t hi·ªán.
- Init block th∆∞·ªùng d√πng ƒë·ªÉ ki·ªÉm tra t√≠nh h·ª£p l·ªá c·ªßa d·ªØ li·ªáu ho·∫∑c th·ª±c hi·ªán c√°c thao t√°c kh·ªüi t·∫°o n√¢ng cao.

---

### V√≠ d·ª• c∆° b·∫£n v·ªÅ Init block

```kotlin
class User(val name: String, var age: Int) {
    init {
        require(age >= 0) { "Tu·ªïi ph·∫£i >= 0" }
        println("User $name ƒë∆∞·ª£c t·∫°o v·ªõi tu·ªïi $age")
    }
}
```

T·∫°o ƒë·ªëi t∆∞·ª£ng:
```kotlin
val u1 = User("Hoa", 20)
// Output: User Hoa ƒë∆∞·ª£c t·∫°o v·ªõi tu·ªïi 20

val u2 = User("Lan", -5)
// L·ªói: IllegalArgumentException: Tu·ªïi ph·∫£i >= 0
```

---

### Nhi·ªÅu Init block trong m·ªôt class

```kotlin
class Customer(val id: Int, val name: String) {
    init {
        println("Kh·ªüi t·∫°o id: $id")
    }
    init {
        println("Kh·ªüi t·∫°o name: $name")
    }
}
val c = Customer(1, "An")
// Output:
// Kh·ªüi t·∫°o id: 1
// Kh·ªüi t·∫°o name: An
```

---

### K·∫øt h·ª£p Init block v·ªõi Secondary constructor

N·∫øu class c√≥ secondary constructor, init block s·∫Ω ƒë∆∞·ª£c th·ª±c thi sau khi primary constructor ƒë∆∞·ª£c g·ªçi (qua `this(...)`).

```kotlin
class Product(val name: String) {
    var price: Double = 0.0

    init {
        println("Init block: $name, price = $price")
    }

    constructor(name: String, price: Double) : this(name) {
        this.price = price
        println("Secondary constructor: $name, price = $price")
    }
}

val p1 = Product("Book")
// Output: Init block: Book, price = 0.0

val p2 = Product("Pen", 5.0)
// Output: Init block: Pen, price = 0.0
//         Secondary constructor: Pen, price = 5.0
```

---

**T√≥m l·∫°i v·ªÅ Init block:**
- Init block gi√∫p ki·ªÉm tra, thi·∫øt l·∫≠p ho·∫∑c x·ª≠ l√Ω d·ªØ li·ªáu ngay khi ƒë·ªëi t∆∞·ª£ng ƒë∆∞·ª£c t·∫°o ra.
- ƒê∆∞·ª£c th·ª±c thi ngay sau khi primary constructor k·∫øt th√∫c.
- C√≥ th·ªÉ khai b√°o nhi·ªÅu init block, ch·∫°y l·∫ßn l∆∞·ª£t t·ª´ tr√™n xu·ªëng d∆∞·ªõi.
- K·∫øt h·ª£p t·ªët v·ªõi secondary constructor v√† c√°c thao t√°c logic kh·ªüi t·∫°o.
- --
## 1.4 Class members (Th√†nh vi√™n l·ªõp)

**Class members** l√† c√°c th√†nh ph·∫ßn b√™n trong m·ªôt class, bao g·ªìm:
- **Properties (thu·ªôc t√≠nh):** D·ªØ li·ªáu ho·∫∑c tr·∫°ng th√°i c·ªßa ƒë·ªëi t∆∞·ª£ng.
- **Methods (ph∆∞∆°ng th·ª©c):** H√†nh vi ho·∫∑c thao t√°c m√† ƒë·ªëi t∆∞·ª£ng th·ª±c hi·ªán.
- **Nested class / inner class:** Class con n·∫±m b√™n trong class cha (n√¢ng cao).

Khai b√°o class members gi√∫p b·∫°n t·ªï ch·ª©c d·ªØ li·ªáu v√† logic c·ªßa ƒë·ªëi t∆∞·ª£ng m·ªôt c√°ch r√µ r√†ng.

---

### V√≠ d·ª• v·ªÅ thu·ªôc t√≠nh v√† ph∆∞∆°ng th·ª©c

```kotlin
class Rectangle(var width: Double, var height: Double) {
    // Property
    val area: Double
        get() = width * height

    // Method
    fun resize(newWidth: Double, newHeight: Double) {
        width = newWidth
        height = newHeight
    }
}
```
- `width`, `height`: Thu·ªôc t√≠nh c√≥ th·ªÉ thay ƒë·ªïi.
- `area`: Thu·ªôc t√≠nh ch·ªâ ƒë·ªçc, gi√° tr·ªã ƒë∆∞·ª£c t√≠nh ƒë·ªông qua getter.
- `resize`: Ph∆∞∆°ng th·ª©c cho ph√©p thay ƒë·ªïi k√≠ch th∆∞·ªõc h√¨nh ch·ªØ nh·∫≠t.

---

### Visibility modifiers d√†nh cho class members

B·∫°n c√≥ th·ªÉ d√πng c√°c access modifier (`private`, `protected`, `internal`, `public`) ƒë·ªÉ ki·ªÉm so√°t ph·∫°m vi truy c·∫≠p c·ªßa t·ª´ng thu·ªôc t√≠nh ho·∫∑c ph∆∞∆°ng th·ª©c.

```kotlin
class User(private val password: String) {
    fun checkPassword(input: String): Boolean {
        return input == password
    }
}
```
·ªû ƒë√¢y, `password` l√† thu·ªôc t√≠nh private, ch·ªâ ki·ªÉm tra ƒë∆∞·ª£c qua h√†m public.

---

## 1.5 Companion object (ƒê·ªëi t∆∞·ª£ng ƒë·ªìng h√†nh)

**Companion object** l√† m·ªôt ƒë·ªëi t∆∞·ª£ng tƒ©nh b√™n trong class.  
N√≥ cho ph√©p b·∫°n ƒë·ªãnh nghƒ©a c√°c th√†nh ph·∫ßn tƒ©nh (static members), factory method, ho·∫∑c h·∫±ng s·ªë li√™n quan t·ªõi class m√† kh√¥ng c·∫ßn t·∫°o instance.

- ƒê∆∞·ª£c khai b√°o v·ªõi t·ª´ kh√≥a `companion object`.
- C√≥ th·ªÉ truy c·∫≠p tr·ª±c ti·∫øp qua t√™n class.

---

### Khi n√†o d√πng companion object?

- ƒê·ªãnh nghƒ©a h·∫±ng s·ªë d√πng chung cho t·∫•t c·∫£ instance c·ªßa class.
- Vi·∫øt h√†m factory ƒë·ªÉ t·∫°o ƒë·ªëi t∆∞·ª£ng t·ª´ d·ªØ li·ªáu ƒë·∫∑c bi·ªát.
- ƒê·ªãnh nghƒ©a c√°c ph∆∞∆°ng th·ª©c ti·ªán √≠ch li√™n quan ƒë·∫øn class.

---

### V√≠ d·ª• companion object

```kotlin
class MathUtils {
    companion object {
        const val PI = 3.1415

        fun square(x: Double): Double {
            return x * x
        }
    }
}

val piValue = MathUtils.PI
val sqVal = MathUtils.square(5.0)
```
- `PI` l√† h·∫±ng s·ªë tƒ©nh.
- `square()` l√† ph∆∞∆°ng th·ª©c tƒ©nh, g·ªçi qua t√™n class m√† kh√¥ng c·∫ßn t·∫°o instance.

---

### Factory method v·ªõi companion object

```kotlin
class Student private constructor(val name: String, val age: Int) {
    companion object {
        fun createFromString(data: String): Student {
            val parts = data.split(",")
            return Student(parts[0], parts[1].toInt())
        }
    }
}

val st = Student.createFromString("Hoa,20")
```
- H√†m `createFromString` cho ph√©p t·∫°o Student t·ª´ chu·ªói m√† kh√¥ng public constructor.

---

**T√≥m l·∫°i v·ªÅ class members & companion object:**
- Class members l√† c√°c thu·ªôc t√≠nh v√† ph∆∞∆°ng th·ª©c c·ªßa class, ki·ªÉm so√°t truy c·∫≠p b·∫±ng access modifier.
- Companion object d√πng ƒë·ªÉ ƒë·ªãnh nghƒ©a th√†nh ph·∫ßn tƒ©nh ho·∫∑c ph∆∞∆°ng th·ª©c ti·ªán √≠ch, truy c·∫≠p qua t√™n class m√† kh√¥ng c·∫ßn t·∫°o ƒë·ªëi t∆∞·ª£ng.
## 2. Special Class: Data class, Enum class, Sealed class

---

### 2.1 Data class

**Data class** trong Kotlin l√† lo·∫°i class chuy√™n d√πng ƒë·ªÉ l∆∞u tr·ªØ d·ªØ li·ªáu (data holder).  
Khi khai b√°o v·ªõi t·ª´ kh√≥a `data`, Kotlin t·ª± ƒë·ªông sinh ra c√°c h√†m:
- `toString()`: chuy·ªÉn ƒë·ªëi t∆∞·ª£ng th√†nh chu·ªói d·ªÖ ƒë·ªçc.
- `equals()`: so s√°nh hai ƒë·ªëi t∆∞·ª£ng d·ª±a tr√™n gi√° tr·ªã c√°c thu·ªôc t√≠nh.
- `hashCode()`: sinh m√£ bƒÉm d·ª±a tr√™n thu·ªôc t√≠nh.
- `copy()`: t·∫°o m·ªôt b·∫£n sao ƒë·ªëi t∆∞·ª£ng, cho ph√©p thay ƒë·ªïi gi√° tr·ªã m·ªôt s·ªë thu·ªôc t√≠nh.

**ƒêi·ªÅu ki·ªán ƒë·ªÉ l√† data class:**
- Ph·∫£i c√≥ √≠t nh·∫•t m·ªôt thu·ªôc t√≠nh trong primary constructor.
- C√°c thu·ªôc t√≠nh ph·∫£i khai b√°o v·ªõi `val` ho·∫∑c `var`.
- Kh√¥ng ƒë∆∞·ª£c l√† abstract, open, sealed, ho·∫∑c inner class.

**·ª®ng d·ª•ng:**  
Data class c·ª±c k·ª≥ h·ªØu √≠ch khi c·∫ßn truy·ªÅn d·ªØ li·ªáu gi·ªØa c√°c th√†nh ph·∫ßn c·ªßa ·ª©ng d·ª•ng, ƒë·∫∑c bi·ªát trong c√°c ki·∫øn tr√∫c MVVM/MVP, API response, l∆∞u tr·ªØ tr·∫°ng th√°i UI.

**V√≠ d·ª•:**

```kotlin
data class User(val id: Int, val name: String)

val u1 = User(1, "Hoa")
val u2 = User(1, "Hoa")

println(u1 == u2) // true, v√¨ data class t·ª± ƒë·ªông so s√°nh theo gi√° tr·ªã
println(u1.toString()) // User(id=1, name=Hoa)

val u3 = u1.copy(name = "Lan")
println(u3) // User(id=1, name=Lan)
```

---

### 2.2 Enum class

**Enum class** l√† class ƒë·∫∑c bi·ªát d√πng ƒë·ªÉ ƒë·ªãnh nghƒ©a m·ªôt t·∫≠p h·ª£p gi√° tr·ªã h·∫±ng s·ªë (constant).  
M·ªói gi√° tr·ªã c·ªßa enum l√† m·ªôt instance (ƒë·ªëi t∆∞·ª£ng) c·ªßa enum class ƒë√≥.

**ƒê·∫∑c ƒëi·ªÉm:**
- Enum class gi√∫p code d·ªÖ ƒë·ªçc, ki·ªÉm so√°t gi√° tr·ªã h·ª£p l·ªá, tr√°nh l·ªói do gi√° tr·ªã kh√¥ng mong mu·ªën.
- C√≥ th·ªÉ khai b√°o thu·ªôc t√≠nh v√† ph∆∞∆°ng th·ª©c cho t·ª´ng gi√° tr·ªã.
- Th∆∞·ªùng d√πng cho tr·∫°ng th√°i, l·ª±a ch·ªçn, lo·∫°i (status, type, option,...).

**·ª®ng d·ª•ng:**  
D√πng cho c√°c tr∆∞·ªùng h·ª£p nh∆∞ tr·∫°ng th√°i c·ªßa ƒë∆°n h√†ng, ng√†y trong tu·∫ßn, m√†u s·∫Øc, lo·∫°i t√†i kho·∫£n,...

**V√≠ d·ª•:**

```kotlin
enum class Color {
    RED, GREEN, BLUE
}

val c = Color.RED
println(c.name)    // "RED" - t√™n enum
println(c.ordinal) // 0 - v·ªã tr√≠ trong enum
```

**Enum n√¢ng cao v·ªõi thu·ªôc t√≠nh v√† ph∆∞∆°ng th·ª©c:**

```kotlin
enum class Direction(val degree: Int) {
    NORTH(0),
    EAST(90),
    SOUTH(180),
    WEST(270);

    fun turnRight(): Direction {
        return values()[(ordinal + 1) % values().size]
    }
}

val d = Direction.NORTH
println(d.degree)      // 0
println(d.turnRight()) // EAST
```

---

### 2.3 Sealed class

**Sealed class** l√† lo·∫°i class d√πng ƒë·ªÉ gi·ªõi h·∫°n m·ªôt t·∫≠p h·ª£p l·ªõp con (subclass) c·ª• th·ªÉ.  
Ch·ªâ c√°c l·ªõp con ƒë∆∞·ª£c khai b√°o trong c√πng file m·ªõi ƒë∆∞·ª£c ph√©p k·∫ø th·ª´a sealed class.

**ƒê·∫∑c ƒëi·ªÉm:**
- Sealed class kh√¥ng th·ªÉ kh·ªüi t·∫°o tr·ª±c ti·∫øp, ch·ªâ kh·ªüi t·∫°o qua c√°c subclass.
- D√πng ƒë·ªÉ bi·ªÉu di·ªÖn c√°c tr·∫°ng th√°i, k·∫øt qu·∫£, ho·∫∑c c√°c tr∆∞·ªùng h·ª£p trong lu·ªìng x·ª≠ l√Ω logic (pattern matching).
- Khi d√πng v·ªõi `when`, compiler s·∫Ω c·∫£nh b√°o n·∫øu c√≥ tr∆∞·ªùng h·ª£p ch∆∞a x·ª≠ l√Ω.

**·ª®ng d·ª•ng:**  
X·ª≠ l√Ω k·∫øt qu·∫£ tr·∫£ v·ªÅ (success, error), tr·∫°ng th√°i UI, c√°c lo·∫°i s·ª± ki·ªán (event), v.v.

**V√≠ d·ª•:**

```kotlin
sealed class Result

data class Success(val data: String): Result()
data class Error(val error: Exception): Result()

fun handle(result: Result) {
    when (result) {
        is Success -> println("Th√†nh c√¥ng: ${result.data}")
        is Error -> println("L·ªói: ${result.error.message}")
        // Kh√¥ng c·∫ßn else, v√¨ t·∫•t c·∫£ subclass ƒë√£ ƒë∆∞·ª£c li·ªát k√™
    }
}
```

**Sealed class gi√∫p ki·ªÉm so√°t lu·ªìng logic m·ªôt c√°ch to√†n di·ªán, tƒÉng t√≠nh an to√†n cho code.**

---

**T√≥m l·∫°i v·ªÅ Special Class trong Kotlin:**
- **Data class:** L∆∞u tr·ªØ d·ªØ li·ªáu, t·ª± ƒë·ªông sinh c√°c h√†m ti·ªán √≠ch, so s√°nh theo gi√° tr·ªã.
- **Enum class:** ƒê·ªãnh nghƒ©a t·∫≠p gi√° tr·ªã c·ªë ƒë·ªãnh, c√≥ th·ªÉ b·ªï sung thu·ªôc t√≠nh/h√†m cho t·ª´ng gi√° tr·ªã.
- **Sealed class:** Gi·ªõi h·∫°n t·∫≠p l·ªõp con, d√πng cho x·ª≠ l√Ω tr·∫°ng th√°i ph·ª©c t·∫°p, an to√†n v·ªõi `when`.